{"version":3,"file":"event-loop-delay.umd.js","sources":["../src/Delay.js"],"sourcesContent":["let listenersMap = new WeakMap();\nfunction Delay(wait=0) {\n    if(this instanceof Delay){\n\n        listenersMap.set(this, []);\n\n        let queue = listenersMap.get(this);\n\n        function *f() {\n            while(queue.length){\n                yield queue.shift();\n            }\n        }\n\n        return function delay(func){\n            if(queue.length>0){\n                queue.push({next:null});\n                queue[queue.length-2].next = func;\n                return false\n            }\n\n            queue.push({next:null});\n            func();\n\n            let timer = setInterval(()=>{\n                let a = f().next();\n                if(a.done){\n                    clearInterval(timer);\n                    return false\n                }\n                if(typeof a.value.next === \"function\"){\n                    a.value.next.call(this)\n                }\n            },wait);\n        }.bind(this)\n    }\n}\n\nexports.Delay = Delay;\n"],"names":["Delay","wait","f","queue","length","shift","listenersMap","set","get","func","push","next","timer","setInterval","a","done","clearInterval","value","call","_this","bind","WeakMap","exports"],"mappings":";;;;8FACA,QAASA,CAAAA,CAAT,EAAuB,IAARC,CAAAA,CAAQ,wDAAH,KACb,eAAgBD,CAAAA,EAAM,SAMXE,CAAAA,uFACAC,CAAK,CAACC,uCACFD,CAAK,CAACE,KAANF,8FAFJD,GAJVI,CAAY,CAACC,GAAbD,CAAiB,IAAjBA,CAAuB,EAAvBA,CAFqB,IAIjBH,CAAAA,CAAK,CAAGG,CAAY,CAACE,GAAbF,CAAiB,IAAjBA,QAQL,UAAeG,CAAf,CAAoB,eACP,CAAbN,CAAAA,CAAK,CAACC,aACLD,CAAAA,CAAK,CAACO,IAANP,CAAW,CAACQ,IAAI,CAAC,IAAN,CAAXR,EACAA,CAAK,CAACA,CAAK,CAACC,MAAND,CAAa,CAAd,CAALA,CAAsBQ,IAAtBR,CAA6BM,KAIjCN,CAAK,CAACO,IAANP,CAAW,CAACQ,IAAI,CAAC,IAAN,CAAXR,CAPuB,CAQvBM,CAAI,EARmB,IAUnBG,CAAAA,CAAK,CAAGC,WAAW,CAAC,UAAI,IACpBC,CAAAA,CAAC,CAAGZ,CAAC,GAAGS,IAAJT,GADgB,MAErBY,CAAAA,CAAC,CAACC,IAFmB,EAGpBC,aAAa,CAACJ,CAAD,CAHO,UAMG,UAAxB,QAAOE,CAAAA,CAAC,CAACG,KAAFH,CAAQH,IANM,EAOpBG,CAAC,CAACG,KAAFH,CAAQH,IAARG,CAAaI,IAAbJ,CAAkBK,CAAlBL,CAPoB,CAAL,CAAA,CASrBb,CATqB,CAVpB,CAAA,CAoBLmB,IApBK,CAoBA,IApBA,GAdf,GAAId,CAAAA,CAAY,CAAG,GAAIe,CAAAA,OAAvB,IAsCAC,OAAO,CAACtB,KAARsB,CAAgBtB"}